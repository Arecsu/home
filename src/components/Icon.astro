---
interface Props {
   iconPath: string,
   size?: string,
   color?: string,
   marginInline?: string
}

const { iconPath, size = '1em', color = 'currentColor', marginInline = '0' } = Astro.props;
const fullPath = `/src/media/svg/${iconPath}.svg`

const icons = import.meta.glob('/src/media/svg/*.svg', { as: 'raw' })

// Ensure the fullPath exists in the icons object
if (!(fullPath in icons)) {
  throw new Error(`Icon not found: ${fullPath}`);
}

const iconContent = await icons[fullPath]()
---
<span class="icon" style={`width: ${size}; height: ${size}; color: ${color}; margin-inline: ${marginInline}`}>
  <Fragment set:html={iconContent} />
</span>

<style>
  .icon {
    display: inline-block;
    vertical-align: middle;
    position: relative;
    bottom: 0.125em;
  }
  .icon :global(svg) {
    width: 100%;
    height: 100%;
    fill: currentColor;
  }
</style>