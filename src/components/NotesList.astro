---
import type { CollectionEntry } from 'astro:content';
import { NOTES_LANGUAGES, type SupportedNotesLang } from "@/languages.ts"

interface Props {
  notes: CollectionEntry<'notes'>[];
  locale: typeof NOTES_LANGUAGES[SupportedNotesLang]['locale']; // Dynamically infer locale types
  langClass: typeof NOTES_LANGUAGES[SupportedNotesLang]['htmlLangClass']; // Dynamically infer langClass types
}

const { notes, locale, langClass } = Astro.props;
---

<ul class={`unstyled-list links-no-underline ${langClass}`}>
  {notes.map((note) => (
    <li>
      <a href={`/notes/${note.slug}`}>
        <span>{note.data.title}</span>
        <time>
          {note.data.date?.toLocaleDateString(locale, { 
            day: '2-digit', 
            month: 'short', 
            year: 'numeric' 
          })}
        </time>
      </a>
    </li>
  ))}
</ul>

<style lang="scss">
  li {
    margin-bottom: 0;
  }

  li a {
    display: flex;
    gap: 4ch;
    width: min(100%, 50ch);
    align-items: center;
    line-height: 2;

    span {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    }

    time {
      text-transform: uppercase;
      letter-spacing: 0.02em;
      @include inter-monospace-numbers;
      font-size: 0.86em;
      text-wrap: nowrap;
    }
  }

  	// Add these new styles for language switching
	.lang-es,
	.lang-en {
		display: none;
	}

	:global(html.lang-es) .lang-es,
	:global(html.lang-en) .lang-en {
		display: block;
	}
</style> 